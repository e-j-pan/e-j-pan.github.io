<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evanium - Personal Website</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            color: #1d1d1f; /* Dark gray for text */
            background-color: #f5f5f7; /* Light gray background */
            font-size: 17px; /* Slightly increased base font size */
            letter-spacing: -0.022em; /* Refined letter spacing for body */
        }

        .body-modal-open { /* Added to prevent body scroll when modal is open */
            overflow: hidden;
        }

        p { /* General paragraph styling */
            margin-bottom: 1.2em;
        }
        
        .container {
            max-width: 1100px; /* Slightly reduced max-width for a more compact feel */
            margin: 0 auto;
            padding: 0 22px; /* Consistent padding */
        }
        
        /* Header Styles */
        header {
            background-color: #ffffff; /* White background */
            color: #1d1d1f; /* Dark text */
            padding: 15px 0; /* Reduced padding */
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid #ddd; /* Subtle border */
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.7rem; /* Slightly adjusted font size */
            font-weight: 600; /* Apple uses semi-bold for titles */
            color: #1d1d1f; /* Dark text */
            text-decoration: none;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 30px; /* Further increased spacing for a more spacious feel */
        }
        
        nav ul li a {
            color: #1d1d1f; /* Dark text */
            text-decoration: none;
            transition: color 0.3s;
            font-size: 1rem; /* Adjusted nav link size */
            font-weight: 500; /* Medium weight for nav links */
        }
        
        nav ul li a:hover {
            color: #007aff; /* Apple blue for hover */
        }
        
        /* Hero Section */
        .hero {
            background: #ffffff; /* White background */
            color: #1d1d1f; /* Dark text */
            padding: 80px 0; /* Adjusted padding */
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3.2rem; /* Increased hero h1 size */
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: -0.015em; /* Refined letter spacing for hero h1 */
        }
        
        .hero p {
            font-size: 1.2rem; /* Increased hero p size */
            line-height: 1.65; /* Improved line height for hero p */
            max-width: 650px; 
            margin: 0 auto 30px;
            color: #555; 
        }
        
        .btn {
            display: inline-block;
            background-color: #007aff; 
            color: white;
            padding: 10px 20px; 
            border-radius: 8px; 
            text-decoration: none;
            transition: background-color 0.3s, opacity 0.3s;
            font-size: 1rem; /* Adjusted button font size */
            font-weight: 500; /* Medium weight for button text */
            border: none; 
            cursor: pointer; 
        }
        
        .btn:hover {
            background-color: #0071e3; /* Darker Apple blue */
            opacity: 0.95;
        }

        .btn-secondary { /* For less prominent actions */
            background-color: #e5e5ea;
            color: #1d1d1f;
        }

        .btn-secondary:hover {
            background-color: #dcdce0;
        }
        
        /* Projects Section */
        .projects {
            padding: 70px 0; /* Adjusted padding */
            background-color: #f5f5f7; /* Match body background */
        }
        
        .section-title {
            text-align: center;
            font-size: 2.4rem; /* Increased section title size */
            font-weight: 600;
            margin-bottom: 45px; 
            color: #1d1d1f;
            letter-spacing: -0.01em; /* Refined letter spacing for section titles */
        }
        
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); 
            gap: 30px; /* Increased gap */
        }
        
        .project-card {
            background-color: white;
            border-radius: 18px; /* Softer, more rounded corners */
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06); /* Even softer, more diffused shadow */
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .project-card:hover {
            transform: translateY(-5px); 
            box-shadow: 0 6px 16px rgba(0,0,0,0.08); /* Slightly more pronounced on hover */
        }
        
        .project-image {
            height: 180px; 
            background-color: #f8f8f8; /* Very light neutral gray */
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aeaeae; /* Subtler placeholder text/icon color */
            font-size: 1.1rem; /* Smaller placeholder text */
        }
        
        .project-content {
            padding: 30px; /* Increased internal padding */
        }
        
        .project-content h3 {
            font-size: 1.4rem; /* Increased project card title size */
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .project-content p {
            color: #555; 
            margin-bottom: 20px;
            font-size: 1rem; /* Increased project card paragraph size */
            line-height: 1.65; /* Improved line height for project card p */
        }
        
        /* About Section */
        .about {
            padding: 70px 0;
            background-color: #ffffff; /* White background */
        }
        
        .about-content {
            display: grid;
            grid-template-columns: 1fr 1.5fr; /* Adjust column ratio */
            gap: 40px; /* Adjusted gap */
            align-items: center;
        }
        
        .about-image {
            height: 350px; /* Adjusted height */
            background-color: #e9ecef; /* Lighter placeholder */
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .about-image svg { /* Style for the SVG inside about-image */
            width: 150px;
            height: 150px;
            stroke: #555; 
            stroke-width: 1.5; /* Lighter stroke for the icon */
        }
        
        .about-text h2.section-title { /* Specific styling for About Me title */
            text-align: left; 
            margin-bottom: 20px;
        }
        
        .about-text p {
            margin-bottom: 15px; 
            color: #555;
            font-size: 1.1rem; /* Increased about text p size */
            line-height: 1.7; /* Improved line height for about text p */
        }
        
        .social-links {
            display: flex;
            gap: 18px; /* Adjusted gap */
            margin-top: 25px; /* Adjusted margin */
        }
        
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 38px; /* Adjusted size */
            height: 38px; /* Adjusted size */
            background-color: #e5e5ea; /* Light gray background */
            color: #1d1d1f; /* Dark icon */
            border-radius: 50%;
            transition: background-color 0.3s, color 0.3s;
        }
        
        .social-links a:hover {
            background-color: #007aff; /* Apple blue on hover */
            color: white;
        }

        .social-links a svg { /* Ensure SVGs within social links are sized */
            width: 18px; 
            height: 18px;
        }
        
        /* Contact Section */
        .contact {
            padding: 70px 0;
            background-color: #f5f5f7; /* Match body background */
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group { /* Replaces inline styles for form elements */
            /* gap property in .form-grid handles bottom margin for direct children */
        }
        
        .form-group.full-width { /* Added for single-column elements like textarea */
             grid-column: 1 / -1; /* Span full width in grid */
             margin-bottom: 20px; /* Explicit margin for elements not in grid first row */
        }


        .form-group label {
            display: block;
            margin-bottom: 8px; /* Increased spacing */
            font-size: 0.9rem;
            color: #333;
            font-weight: 500;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group textarea {
            width: 100%;
            padding: 15px; /* Increased internal padding for inputs */
            border-radius: 8px; 
            border: 1px solid #d1d1d1; /* Slightly adjusted border color for inputs */
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
            background-color: #fff; 
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus,
        .form-group textarea:focus {
            border-color: #007aff; /* Apple blue focus */
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.15); /* Subtle focus shadow */
            outline: none;
        }

        .form-group textarea {
            resize: vertical; /* Allow vertical resize */
        }
        
        /* Footer */
        footer {
            background-color: #ffffff; 
            color: #555; 
            padding: 50px 0 25px; /* Further reduced padding for minimalism */
            text-align: center;
            border-top: 1px solid #ddd; 
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
            gap: 30px;
            text-align: left;
            margin-bottom: 30px; /* Slightly reduced margin */
        }
        
        .footer-column h3 {
            font-size: 1.4rem; 
            font-weight: 600;
            margin-bottom: 18px; 
            color: #1d1d1f;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px; /* Slightly reduced margin */
        }
        
        .footer-column ul li a {
            color: #555; 
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.9rem; /* Smaller footer links */
        }
        
        .footer-column ul li a:hover {
            color: #007aff; 
        }
        
        .copyright {
            border-top: 1px solid #e5e5ea; 
            padding-top: 20px; /* Slightly reduced padding */
            font-size: 0.8rem; /* Smaller copyright text */
            color: #888; 
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start; /* Ensure logo and nav align left on mobile */
            }
            
            nav ul {
                margin-top: 15px; /* Adjusted from 20px for tighter mobile header */
                padding-left: 0; 
                flex-direction: column;
            }

            nav ul li {
                margin-left: 0;
                margin-bottom: 10px;
            }
            
            .hero h1 { /* Already adjusted, just for context */
                font-size: 2.2rem;
            }

            .hero p {
                font-size: 1.05rem;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .about-content {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Frame for displaying other HTML content (if used) */
        .content-frame { 
            width: 100%;
            border: none;
            border-radius: 12px; /* Consistent rounding */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        }

        /* Modal Styles (Apple-like adjustments) */
        .modal {
            /* display: none; */ /* Replaced by visibility */
            opacity: 0;
            visibility: hidden;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Allows scrolling of modal content if it overflows viewport */
            background-color: rgba(0, 0, 0, 0.55); 
            transition: opacity 0.2s ease-in-out, visibility 0s linear 0.2s; /* Delay visibility change */
        }

        .modal.is-visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.2s ease-in-out, visibility 0s linear 0s; /* Show immediately */
        }
        
        .modal-content {
            position: relative;
            background-color: #f9f9f9; /* Off-white modal background */
            margin: 5vh auto; /* Use vh for vertical centering margin */
            padding: 25px; /* Increased padding */
            border-radius: 16px; /* More rounded corners */
            width: 90%; /* Adjusted width for responsiveness */
            max-width: 800px; /* Reduced max-width */
            max-height: 90vh; /* Adjusted max height relative to viewport */
            overflow-y: auto;
            box-shadow: 0 8px 30px rgba(0,0,0,0.15); /* Softer shadow */
        }
        
        .close-modal {
            position: absolute;
            top: 18px; /* Adjusted position */
            right: 18px; /* Adjusted position */
            font-size: 26px;
            font-weight: normal; /* Lighter close button */
            color: #888; /* Gray close button */
            cursor: pointer;
            transition: color 0.2s;
            line-height: 1; /* Ensure consistent height */
        }
        .close-modal:hover {
            color: #333; /* Darker on hover */
        }

        /* WLED/Recipe Modal Specific Styles */
        /* Styles for tabbed content within WLED modal */
        .tab {
            overflow: hidden;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
        }

        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 12px 18px;
            transition: 0.3s;
            font-size: 1rem;
            color: #555;
            border-bottom: 3px solid transparent; /* Underline for active tab */
        }

        .tab button:hover {
            background-color: #f0f0f0; /* Subtle hover for tab buttons */
            border-bottom-color: #ccc; /* Indicate hover over tab underline */
        }

        .tab button.active {
            border-bottom-color: #007aff; /* Apple blue for active tab underline */
            color: #007aff;
            font-weight: 500;
        }

        .tabcontent { /* General tab content styling */
            display: none; /* Hidden by default, shown by JS */
            padding: 10px 0;
            animation: fadeIn 0.5s; /* Simple fade-in for tab content */
        }

        @keyframes fadeIn { /* Fade-in animation for tab content */
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tabcontent .content { /* Styles for the .content div inside tabcontent */
            line-height: 1.7;
        }
        .tabcontent .content h1, /* Added h1 for WLED main title */
        .tabcontent .content h2 {
            font-size: 1.8rem; /* Adjusted modal h1/h2 size */
            font-weight: 600;
            margin-bottom: 15px;
            color: #1d1d1f;
            letter-spacing: -0.01em; /* Refined letter spacing for modal titles */
        }
        .tabcontent .content h3 {
            font-size: 1.4rem; /* Adjusted modal h3 size */
            font-weight: 600;
            margin-top: 20px;
            margin-bottom: 10px;
            color: #333;
            letter-spacing: -0.005em; /* Refined letter spacing for modal h3 */
        }
        .tabcontent .content p, 
        .tabcontent .content ul, 
        .tabcontent .content ol {
            margin-bottom: 15px;
            color: #333; 
            font-size: 1rem; /* Adjusted modal paragraph size */
            line-height: 1.65; /* Improved line height for modal p */
        }
        .tabcontent .content ul, 
        .tabcontent .content ol {
            padding-left: 25px; /* Standard indentation */
        }
        .tabcontent .content img { /* General image styling within tabs */
            max-width: 100%; /* Responsive images */
            height: auto;
            border-radius: 8px; /* Rounded corners for images */
            margin: 15px auto; /* Spacing around images and centered */
            display: block; /* For centering with margin auto */
        }
        /* Table styling within tabs */
        .tabcontent .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9rem; /* Smaller font for tables */
        }
        .tabcontent .content th, 
        .tabcontent .content td {
            padding: 10px 12px; /* Padding in table cells */
            text-align: left;
            border: 1px solid #e0e0e0; /* Lighter borders for table */
        }
        .tabcontent .content th {
            background-color: #f9f9f9; /* Very light gray for table headers */
            font-weight: 600; /* Bold table headers */
        }
        .tabcontent .content tr:nth-child(even) {
            background-color: #fdfdfd; /* Zebra striping for table rows */
        }

        /* Recipe Card Specific Styles (Generated by JS) */
        .recipe-card-container {
            background-color: #fff;
            border-radius: 12px; /* Matches modal content rounding */
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin: 20px auto; /* Centering if content is narrower than modal */
            max-width: 700px; /* Max width for the recipe card itself */
        }
        .recipe-header {
            background: linear-gradient(to right, #c0a080, #d3b8a0); /* Earthy tones */
            color: #fff;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        .recipe-header h1 {
            font-size: 2rem; /* Matches .section-title more closely */
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.01em;
        }
        .recipe-header p {
            font-size: 1.05rem;
            opacity: 0.9;
            margin-bottom: 0; /* Reset paragraph margin for this specific p */
        }
        .recipe-header-icon-bg {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .recipe-header-icon-bg svg {
            width: 30px; /* Slightly smaller icon in header */
            height: 30px;
            fill: #a67c52; /* Icon color */
        }
        .recipe-main-content {
            padding: 25px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }
        .recipe-image-placeholder {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            height: 280px;
            background-color: #f0f0f0; /* Light gray placeholder bg */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #a67c52; /* Icon/text color for placeholder */
        }
        .recipe-image-placeholder svg {
            width: 60px; /* Adjust size as needed */
            height: 60px;
            stroke-width: 1.5; /* Consistent with other icons */
        }
        .recipe-image-placeholder p {
            margin-top: 10px;
            font-size: 0.9em;
            margin-bottom: 0;
        }
        .recipe-section {
            background-color: #f9f9f9; /* Slightly off-white for sections */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
        }
        .recipe-section-title {
            color: #a67c52; /* Earthy accent for titles */
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 1.5rem; /* Consistent with .project-content h3 */
            font-weight: 600;
        }
        .recipe-section-title svg {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            stroke-width: 2; /* Standard stroke for icons in content */
        }
        .recipe-ingredient-list, .recipe-instruction-list {
            list-style-type: none;
            padding-left: 0;
            font-size: 0.95rem; /* Matches .tabcontent p */
            line-height: 1.65;
        }
        .recipe-ingredient-list li {
            margin-bottom: 8px;
            padding-left: 20px; /* Space for custom bullet */
            position: relative;
        }
        .recipe-ingredient-list li::before { /* Custom bullet */
            content: "â€¢";
            position: absolute;
            left: 0;
            top: 0; /* Adjust if alignment is off */
            color: #a67c52; /* Accent color for bullets */
            font-size: 1.2em; /* Adjust bullet size */
            line-height: inherit;
        }
        .recipe-instruction-list {
            padding-left: 5px; /* Align with text */
        }
        .recipe-instruction-list li {
            margin-bottom: 12px;
            display: flex; /* For aligning step number and text */
            align-items: flex-start;
        }
        .recipe-step-number {
            background-color: #a67c52; /* Accent background for step numbers */
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 0.85em;
            font-weight: 600;
            flex-shrink: 0; /* Prevent shrinking */
        }
        .recipe-step-text h4 { /* Title for instruction step */
            font-size: 1.05em;
            font-weight: 600;
            color: #333;
            margin-bottom: 3px;
        }
        .recipe-step-text p { /* Paragraph for instruction step detail */
            font-size: 0.95em;
            color: #555;
            margin-bottom: 0;
        }
        .recipe-tips {
            background-color: #e6f4ea; /* Light green-ish for tips, or another subtle color */
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #a67c52; /* Accent border */
            font-size: 0.9rem;
        }
        .recipe-tips h3 { /* Overriding .recipe-section-title for this specific h3 */
            color: #a67c52;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        .recipe-tips svg {
            width: 18px;
            height: 18px;
        }
        .recipe-nutrition-facts {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px 0;
            background-color: #f9f9f9;
            border-radius: 10px;
            font-size: 0.9em;
        }
        .recipe-nutrition-facts > div {
            text-align: center;
        }
        .recipe-nutrition-facts .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #a67c52;
        }
        .recipe-nutrition-facts .label {
            font-size: 0.9em;
            color: #777;
        }
        .recipe-footer-text {
            text-align: center;
            padding: 20px;
            color: #aaa;
            font-size: 0.85em;
        }
        .recipe-footer-text p {
            margin-bottom: 0.3em;
        }

    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="#" class="logo">Evanium</a>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#projects">Projects</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <section id="home" class="hero">
        <div class="container">
            <h1>Hi there ðŸ‘‹</h1>
            <p>Welcome to evanium.com - My personal website showcasing my projects, recipes, and smart home documentation.</p>
            <a href="#projects" class="btn">View My Projects</a>
        </div>
    </section>
    
    <section id="projects" class="projects">
        <div class="container">
            <h2 class="section-title">My Projects</h2>
            <div class="projects-grid">
                <div class="project-card">
                    <div class="project-image">WLED Remote Control Guide</div>
                    <div class="project-content">
                        <h3>WLED Remote Control Guide</h3>
                        <p>Complete documentation for controlling your bedroom ceiling LED lights with the Tuya TS004F Zigbee remote.</p>
                        <a href="#" class="btn" onclick="openModal('wled-modal')">View Project</a>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-image">Recipe Collection</div>
                    <div class="project-content">
                        <h3>Recipe Collection</h3>
                        <p>A collection of my favorite recipes, including the Walnut Almond Chia Milk made with the Nutr machine.</p>
                        <a href="#" class="btn" onclick="openModal('recipe-modal')">View Recipes</a>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-image">GitHub Profile</div>
                    <div class="project-content">
                        <h3>GitHub Profile</h3>
                        <p>Check out my GitHub profile to see my coding projects and contributions.</p>
                        <a href="https://github.com/e-j-pan" class="btn" target="_blank">Visit GitHub</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section id="about" class="about">
        <div class="container about-content">
            <div class="about-image">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> {/* Adjusted SVG, relying on CSS for size */}
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
            <div class="about-text">
                <h2 class="section-title">About Me</h2> {/* Applied .section-title and then targeted with .about-text h2.section-title for specifics */}
                <p>Hello! I'm the creator of evanium.com. I'm passionate about smart home technology, cooking, and web development.</p>
                <p>This website showcases some of my projects, including my WLED lighting setup documentation and favorite recipes.</p>
                <p>Feel free to explore the site and check out my GitHub profile for more of my work!</p>
                <div class="social-links">
                    <a href="https://github.com/e-j-pan" target="_blank">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"> {/* Removed fixed width/height, rely on CSS */}
                            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                        </svg>
                    </a>
                    <a href="#" target="_blank">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                            <rect x="2" y="9" width="4" height="12"></rect>
                            <circle cx="4" cy="4" r="2"></circle>
                        </svg>
                    </a>
                    <a href="#" target="_blank">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </section>
    
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <form id="contact-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                </div>
                <div class="form-group full-width">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn">Send Message</button>
            </form>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Evanium</h3>
                    <p>A personal website showcasing projects, recipes, and smart home documentation.</p>
                </div>
                <div class="footer-column">
                    <h3>Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="https://github.com/e-j-pan" target="_blank">GitHub</a></li>
                        <li><a href="#" target="_blank">LinkedIn</a></li>
                        <li><a href="#" target="_blank">Twitter</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Evanium. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- WLED Modal -->
    <div id="wled-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('wled-modal')">&times;</span>
            <div id="wled-content">
                <!-- WLED Remote Control Guide Content -->
                <header>
                    <h1>WLED Remote Control Guide</h1>
                    <p>Complete documentation for controlling your bedroom ceiling LED lights</p>
                </header>
                
                <div class="tab">
                    <button class="tablinks" onclick="openWLEDTab(event, 'Overview')" id="defaultOpen">Overview</button>
                    <button class="tablinks" onclick="openWLEDTab(event, 'RemoteGuide')">Remote Guide</button>
                    <button class="tablinks" onclick="openWLEDTab(event, 'Effects')">Effects</button>
                    <button class="tablinks" onclick="openWLEDTab(event, 'Troubleshooting')">Troubleshooting</button>
                </div>
                
                <div id="Overview" class="tabcontent"> {/* Removed inline style="display:block;" */}
                    <div class="content">
                        <h2>About Your WLED Setup</h2>
                        <p>This guide provides complete documentation for the Tuya TS004F Zigbee remote that controls the bedroom ceiling WLED lights. Whether you're a family member or guest, this guide will help you use the remote effectively.</p>
                        
                        <h3>System Components</h3>
                        <ul>
                            <li><strong>Controller:</strong> Dig-Uno-V3 ESP32</li>
                            <li><strong>LED Strip:</strong> 480 addressable RGB LEDs</li>
                            <li><strong>Remote:</strong> Tuya TS004F Zigbee Remote</li>
                            <li><strong>Hub:</strong> Zigbee Coordinator integrated with Home Assistant</li>
                            <li><strong>Software:</strong> WLED v0.15.0</li>
                        </ul>
                        
                        <h3>What is WLED?</h3>
                        <p>WLED is an open-source software that controls LED strips through an ESP microcontroller. Our setup supports 187 different lighting effects and 72 color palettes, all controllable via the remote, smartphone app, or Home Assistant dashboard.</p>
                        
                        <img src="https://raw.githubusercontent.com/Aircoookie/WLED-Docs/master/assets/images/wled_logo_akemi.png" alt="WLED Logo"> {/* Removed inline style */}
                    </div>
                </div>
                
                <div id="RemoteGuide" class="tabcontent">
                    <!-- Remote guide content will be injected by JS -->
                </div>
                
                <div id="Effects" class="tabcontent">
                    <!-- Effects content will be injected by JS -->
                </div>
                
                <div id="Troubleshooting" class="tabcontent">
                    <!-- Troubleshooting content will be injected by JS -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recipe Modal -->
    <div id="recipe-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('recipe-modal')">&times;</span>
            <div id="recipe-content">
                <!-- Recipe Card Content will be injected by JS -->
                <!-- Most styles for this are inline in the JS due to their specificity -->
            </div>
        </div>
    </div>
    
    <script>
        // Modal Functions
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.add('is-visible');
            document.body.classList.add('body-modal-open');

            if (modalId === 'wled-modal') {
                const defaultOpenButton = document.getElementById("defaultOpen");
                if (defaultOpenButton) {
                    defaultOpenButton.click();
                }
            }
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.remove('is-visible');
            document.body.classList.remove('body-modal-open');
        }
        
        // WLED Tab Functions
        function openWLEDTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tabcontent");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tablinks");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            const currentTab = document.getElementById(tabName);
            if(currentTab) {
                currentTab.style.display = "block";
            }
            if(evt && evt.currentTarget) { //Ensure evt and evt.currentTarget exist
                evt.currentTarget.className += " active";
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let i = 0; i < modals.length; i++) {
                if (event.target == modals[i]) { // Direct click on the modal backdrop
                    closeModal(modals[i].id);
                }
            }
        }
        
        // Handle contact form submission
        document.getElementById("contact-form").addEventListener("submit", function(event) {
            event.preventDefault();
            const submitButton = event.target.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.textContent;
            submitButton.textContent = 'Sending...';
            submitButton.disabled = true;

            // Simulate network request
            setTimeout(() => {
                alert("Thank you for your message! This is a demo form, and in a real implementation, this would send your message to the site owner.");
                document.getElementById("contact-form").reset();
                submitButton.textContent = originalButtonText;
                submitButton.disabled = false;
            }, 1000);
        });
        
        // Initialize the WLED tab content (inline styles in JS are kept for now for table content)
        function initWLEDContent() {
            const remoteGuideEl = document.getElementById("RemoteGuide");
            if (remoteGuideEl) {
                // Table styles are now mostly covered by .tabcontent .content table CSS rules
                remoteGuideEl.innerHTML = `
                <div class="content">
                    <h2>Tuya TS004F Remote Overview</h2>
                    <p>The Tuya TS004F (_TZ3000_abrsvsou) is a rotating knob remote with multiple control functions. This guide explains all the functions available with this remote.</p>
                    <img src="https://raw.githubusercontent.com/Koenkk/zigbee2mqtt.io/master/docs/images/devices/TS004F_rotary.jpg" alt="Remote Control">
                    <h3>Button Controls</h3>
                    <table><thead><tr><th>Action</th><th>Function</th><th>Description</th></tr></thead>
                    <tbody>
                    <tr><td>Short Press</td><td>Toggle</td><td>Turn the light on or off</td></tr>
                    <tr><td>Long Press</td><td>Colorloop</td><td>Start a color cycling effect</td></tr>
                    <tr><td>Long Release</td><td>Stop Effect</td><td>Return to solid color</td></tr>
                    </tbody></table>
                    <h3>Rotary Controls</h3>
                    <table><thead><tr><th>Action</th><th>Function</th><th>Description</th></tr></thead>
                    <tbody>
                    <tr><td>Slow Right Turn</td><td>Brightness Up</td><td>Increase brightness by 10%</td></tr>
                    <tr><td>Slow Left Turn</td><td>Brightness Down</td><td>Decrease brightness by 10%</td></tr>
                    <tr><td>Fast Right Turn</td><td>Next Effect</td><td>Change to next WLED effect</td></tr>
                    <tr><td>Fast Left Turn</td><td>Previous Effect</td><td>Change to previous WLED effect</td></tr>
                    </tbody></table>
                    <h3>Battery Replacement</h3>
                    <p>The remote uses a CR2450 battery. When the battery level drops below 10%, it's time to replace it.</p>
                    <ol>
                        <li>Locate the small indent on the back of the remote</li>
                        <li>Use a fingernail or small flat tool to gently pry open the back cover</li>
                        <li>Remove the old CR2450 battery</li>
                        <li>Insert the new CR2450 battery with the positive (+) side facing up</li>
                        <li>Snap the back cover into place</li>
                        <li>Test the remote to confirm it's working</li>
                    </ol>
                </div>`;
            }
            
            const effectsEl = document.getElementById("Effects");
            if (effectsEl) {
                 // Inline styles for the grid of effects are kept for simplicity here, could be classes.
                effectsEl.innerHTML = `
                <div class="content">
                    <h2>WLED Effects Guide</h2>
                    <p>Your WLED installation supports 187 different effects. Here's a selection of recommended effects to try:</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin: 20px 0;">
                        ${['Solid', 'Rainbow', 'Colorloop', 'Multi Comet', 'Twinkle', 'Fire 2012', 'Aurora', 'Plasma Ball']
                        .map(effect => `<div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; text-align: center; background-color: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.05);"><h4 style="margin-bottom:5px; font-weight:500; color: #1d1d1f;">${effect}</h4><p style="font-size:0.85em; color:#555;">${effect === 'Solid' ? 'Basic solid color' : effect + ' pattern'}</p></div>`).join('')}
                    </div>
                    <h3>Changing Effects</h3>
                    <p>You can change effects by:</p>
                    <ul>
                        <li>Fast-rotating the remote knob right (next) or left (previous)</li>
                        <li>Using the WLED app on your phone</li>
                        <li>Using the Home Assistant dashboard</li>
                    </ul>
                </div>`;
            }
            
            const troubleshootingEl = document.getElementById("Troubleshooting");
            if (troubleshootingEl) {
                troubleshootingEl.innerHTML = `
                <div class="content">
                    <h2>Troubleshooting</h2>
                    <h3>Remote Not Responding</h3> <ol><li>Check battery (CR2450, replace if <10%).</li><li>Ensure remote is within Zigbee network range.</li><li>Try restarting remote (remove/reinsert battery).</li></ol>
                    <h3>Light Shows Wrong Colors</h3> <ol><li>Check selected effect.</li><li>Try Solid effect, then back to desired.</li><li>Restart WLED controller (toggle power).</li></ol>
                    <h3>Light Won't Turn On</h3> <ol><li>Check WLED controller power.</li><li>Verify WLED device network connection.</li><li>Restart Home Assistant server.</li><li>Check Home Assistant automation status.</li></ol>
                    <h3>Connection Issues</h3> <ol><li>Ensure Zigbee network is functional.</li><li>Check WLED device IP address.</li><li>Verify Home Assistant can communicate with WLED.</li></ol>
                </div>`;
            }
        }
        
        // Initialize the recipe content
        function initRecipeContent() {
            const recipeContentEl = document.getElementById("recipe-content");
            if (recipeContentEl) {
                recipeContentEl.innerHTML = `
                <div class="recipe-card-container">
                    <div class="recipe-header">
                        <div class="recipe-header-icon-bg">
                            <svg viewBox="0 0 24 24">
                                <path d="M18.32,4.26C16.84,3.05,15.01,2.25,13,2.05v2.02c1.46,0.18,2.79,0.76,3.9,1.62L18.32,4.26z M19.93,11h2.02 c-0.2-2.01-1-3.84-2.21-5.32L18.31,7.1C19.17,8.21,19.75,9.54,19.93,11z M18.31,16.9l1.43,1.43c1.21-1.48,2.01-3.32,2.21-5.32 h-2.02C19.75,14.46,19.17,15.79,18.31,16.9z M13,19.93v2.02c2.01-0.2,3.84-1,5.32-2.21l-1.43-1.43 C15.79,19.17,14.46,19.75,13,19.93z M13,12V7h-2v5H7l5,5l5-5H13z M11,19.93v2.02c-2.01-0.2-3.84-1-5.32-2.21l1.43-1.43 C8.21,19.17,9.54,19.75,11,19.93z M4.26,5.68C3.05,7.16,2.25,8.99,2.05,11h2.02c0.18-1.46,0.76-2.79,1.62-3.9L4.26,5.68z M4.26,18.32l1.43-1.43c-0.86-1.1-1.44-2.43-1.62-3.9H2.05C2.25,15.01,3.05,16.84,4.26,18.32z"></path>
                            </svg>
                        </div>
                        <h1>Walnut Almond Chia Milk</h1>
                        <p>Creamy homemade plant-based milk</p>
                    </div>
                    
                    <div class="recipe-main-content">
                        <div class="recipe-image-placeholder">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path d="M4 19h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2z"></path>
                                <circle cx="12" cy="13" r="3"></circle>
                                <path d="M16.5 7.5v-2a2 2 0 0 0-2-2h-5a2 2 0 0 0-2 2v2"></path>
                            </svg>
                            <p>Walnut Almond Chia Milk</p>
                        </div>
                        
                        <div class="recipe-section">
                            <h3 class="recipe-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                </svg>
                                Ingredients
                            </h3>
                            <ul class="recipe-ingredient-list">
                                ${['1/4 cup raw walnuts', '1/4 cup raw almonds', '1 tbsp chia seeds', '1-2 dates (optional)', '1/4 tsp vanilla (optional)', 'Pinch of salt', '1 1/2 cups filtered water']
                                .map(ing => `<li>${ing.replace(/(\d[^<]*)/, '<strong>$1</strong>')}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="recipe-section" style="grid-column: 1 / -1;"> {/* Spanning full width if only one column on small screens */}
                            <h3 class="recipe-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <polyline points="9 11 12 14 22 4"></polyline>
                                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                                </svg>
                                Instructions
                            </h3>
                            <ol class="recipe-instruction-list">
                                ${[
                                    { title: 'Pre-soak nuts (optional but recommended)', detail: 'Soak the walnuts and almonds in water for 4-8 hours or overnight in the refrigerator. This softens them and makes a creamier milk. Drain and rinse thoroughly before using.'},
                                    { title: 'Prepare the Nutr machine', detail: 'Make sure your Nutr machine is clean and plugged in. Add the soaked and rinsed walnuts and almonds to the Nutr chamber. Add the chia seeds. Add any optional sweeteners or flavorings. Add the filtered water to the fill line (approximately 1 1/2 cups).'},
                                    { title: 'Select program and blend', detail: 'Close the lid securely. Press the power button to turn on the machine. Choose the "Nuts" program (typically by pressing the program button until you reach the nut setting). Press start and let the machine complete its cycle (approximately 5-7 minutes).'},
                                    { title: 'Strain if desired', detail: 'Your milk is ready to use directly from the machine. For an extra-smooth texture, you can strain it through a nut milk bag or fine mesh strainer.'},
                                    { title: 'Storage', detail: 'Transfer to a sealed container. Refrigerate and use within 3-5 days. Shake well before each use as separation is natural.'}
                                ].map((step, i) => `<li><span class="recipe-step-number">${i+1}</span><div class="recipe-step-text"><h4>${step.title}</h4><p>${step.detail}</p></div></li>`).join('')}
                            </ol>
                        </div>
                        
                        <div class="recipe-tips" style="grid-column: 1 / -1;">
                            <h3 class="recipe-section-title">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="12"></line>
                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                </svg>
                                Tips
                            </h3>
                            <p>For a thicker consistency, add 1-2 more tablespoons of chia seeds and let the mixture sit for 10 minutes after blending. This creates a delicious pudding-like texture! For additional flavor variations, try adding a dash of cardamom, nutmeg, or cocoa powder.</p>
                        </div>
                        
                        <div class="recipe-nutrition-facts" style="grid-column: 1 / -1;">
                            ${[{label: 'Calories', value: '~300'}, {label: 'Protein', value: '~8g'}, {label: 'Fats', value: '~26g'}, {label: 'Fiber', value: '~5g'}]
                            .map(item => `<div><div class="value">${item.value}</div><div class="label">${item.label}</div></div>`).join('')}
                        </div>
                    </div>
                    
                    <div class="recipe-footer-text">
                        <p>Made with â™¥ using your Nutr Plant-Based Milk Maker.</p>
                        <p>Recipe created May 18, 2025.</p>
                    </div>
                </div>`;
            }
        }
        
        // Call initialization functions when DOM content loads
        document.addEventListener("DOMContentLoaded", function() {
            initWLEDContent();
            initRecipeContent();
        });